// server.js
require("dotenv").config();
const express = require('express');
const { GoogleGenerativeAI } = require('@google/generative-ai'); // GoogleGenerativeAI 추가
const app = express();


// GoogleGenerativeAI 인스턴스 생성 (한 번만)
const genAI = new GoogleGenerativeAI(process.env.API_KEY);
const model = genAI.getGenerativeModel({ model: 'gemini-1.5-flash' });


// 기존 static 파일 서빙
app.use(express.static(__dirname + '/public'));

app.listen(process.env.PORT, () => {
    console.log('http://localhost:8080 에서 서버 실행중');
});


// 기본 경로
app.get('/',(req,res)=>{
    res.sendFile(__dirname+'/public/start/1st.html');
});

app.get('/main', (req, res) => {
    res.sendFile(__dirname+'/public/main/select_MBTI.html');
});


// 지역 선택 페이지
app.get('/selectLocal/:type', (req, res) => {
    res.sendFile(__dirname+'/public/selectLocal/select_local.html');
});

app.get('/map',(req,res)=>{
    res.sendFile(__dirname+'/public/map/map.html');
});

//관광지 추천 페이지
app.get('/suggestion/:type/:region',(req,res)=>{
    res.sendFile(__dirname+'/public/suggestion/suggestion.html');
});

// 관광지 추천 API
app.get('/api/:type/:region', async (req, res) => {
    const { type, region } = req.params;

    // 관광지 추천을 AI에 요청
    try {
        const recommendation = await getTouristRecommendation(type, region);
        res.json({ type, region, recommendation });
    } catch (error) {
        console.error('Error generating recommendation:', error);
        res.status(500).json({ error: 'Failed to generate recommendation' });
    }
});

// AI를 이용한 관광지 추천 함수
const getTouristRecommendation = async (mbti, region) => {
    // AI에게 요청할 프롬프트 작성
    const prompt = `MBTI는 마이어스-브릭스 유형 지표(Myers-Briggs Type Indicator)의 약자로, 개인의 성격 유형을 16가지로 분류하는 심리 검사입니다. 이 검사는 스위스의 심리학자 칼 융(Carl Jung)의 성격 유형 이론을 바탕으로 캐서린 쿡 브릭스(Katharine Cook Briggs)와 그녀의 딸 이자벨 브릭스 마이어스(Isabel Briggs Myers)가 개발하였습니다. 

MBTI는 다음의 네 가지 선호 지표를 조합하여 개인의 성격 유형을 파악합니다:

1. **에너지 방향**:
   - **외향형(Extraversion, E)**: 사람들과의 상호작용에서 에너지를 얻고, 외부 세계에 관심이 많습니다.
   - **내향형(Introversion, I)**: 혼자만의 시간에서 에너지를 얻고, 내면 세계에 집중합니다.

2. **정보 수집 방식**:
   - **감각형(Sensing, S)**: 현재의 현실과 구체적인 사실에 주의를 기울입니다.
   - **직관형(Intuition, N)**: 미래의 가능성과 전체적인 패턴에 주목합니다.

3. **의사결정 기준**:
   - **사고형(Thinking, T)**: 논리와 객관적인 분석을 중시합니다.
   - **감정형(Feeling, F)**: 개인의 가치와 감정을 고려하여 판단합니다.

4. **생활 양식**:
   - **판단형(Judging, J)**: 계획적이고 체계적인 생활을 선호합니다.
   - **인식형(Perceiving, P)**: 유연하고 자발적인 생활 방식을 좋아합니다.

이러한 네 가지 지표의 조합으로 총 16가지의 성격 유형이 도출되며, 각 유형은 개인의 성향과 행동 방식을 이해하는 데 도움을 줍니다. MBTI는 자기 이해, 대인 관계 개선, 직업 선택 등 다양한 분야에서 활용되고 있습니다. 


{
  "ISTJ": {
    "nickname": [
      "논리 검사관",
      "지구의 소금"
    ],
    "traits": [
      "사실에 관한 정확하고 체계적인 기억.",
      "업무 실행에 신중하고 책임감 있게 임합니다.",
      "강력한 집중력과 현실감", ",
      "압박 속에서도 조직적이고 침착합니다.",
      "안정성과 전통을 선호합니다."
    ],
    "strengths": [
      "강력한 책임감을 가지고 주어진 작업을 철저히 완료합니다.",
      "규칙과 원칙을 엄격하게 준수합니다.",
      "자세한 기억과 과거 경험을 회상할 수 있습니다.",
      "실수를 깨닫고 빠르게 수정합니다.",
      "매우 절제되고 부지런합니다."
    ],
    "weakness": [
      "감정과 기분을 이해하는 데 어려움을 겪습니다(Fi 열등감).",
      "광범위한 직관적 사고가 부족합니다(Ne 열등감).",
      "갑작스러운 변화나 예측할 수 없는 상황을 좋아합니다.",
      "다른 사람에 대한 호불호가 심해져서 편견을 가질 수 있습니다."
    ],

"behavior": [
      "시간을 잘 지키고 1분이라도 지각하는 것을 싫어합니다.",
      "세부한 기억을 붙잡고 과거를 회상하며 즐깁니다.",
      "야외보다는 집에서 여가 시간을 보내는 것을 선호합니다.",
      "스트레스가 한 번의 강력한 폭발로 폭발할 때까지 견뎌냅니다."
    ]
},

  },
  "ISTP": {
    "nickname": [
      "다재다능한 장인",
      "크래프트맨"
    ],
    "traits": [
      "잠재적인 호기심으로 삶을 관찰합니다.",
      "도구에 대한 숙련도가 높고 상황 분석에 민감합니다.",
      "논리적이고 합리적이며 불필요하게 과도하게 행사하는 경우는 거의 없습니다.",
      "독립적이고 추상적인 이론보다는 실제 경험을 선호합니다."
    ],
    "strengths": [
      "논리적 문제 해결력과 강력한 분석 능력.",
      "새로운 환경과 도전에 적응 가능.",
      "정밀도가 필요한 작업에 고도로 숙련되어 있습니다(보조).",
      "독립과 자유를 소중히 여깁니다."
    ],
    "weakness": [
      "일상적이고 구조화된 라이프스타일을 좋아합니다.",
      "감정을 이해하거나 표현하는 데 어려움을 겪습니다(Fe 열등감).",
      "낯선 사람에게는 무관심하거나 접근할 수 없는 것처럼 보일 수 있습니다."
    ],

"behavior": [
      "고독함을 즐기고 개인의 자유를 소중히 여깁니다.",
      "혁신적이고 실용적인 솔루션을 만드는 경우가 많습니다.",
      "불필요한 드라마나 타인의 삶에 개입하지 마세요.",
      "효율적으로 작동하여 노력을 절약하는 동시에 생산량을 극대화할 수 있습니다."
    ]
  },


"ISFJ": {
    "nickname": [
      "용기 있는 보호자",
      "실용적 도우미"
    ],
    "traits": [
      "타인에 대한 연민과 깊은 공감.",
      "강력한 책임감과 인내심.",
      "추상적인 가능성보다 증거와 유형의 데이터를 선호합니다.",
      "순함과 내면의 결단력 사이에서 균형을 잡습니다."
    ],
    "strengths": [
      "다른 사람들에게 신뢰와 안정성을 제공합니다.",
      "업무 실행에 있어 매우 신뢰할 수 있고 세심합니다.",
      "친한 친구와 가족에 대한 충성심을 보여줍니다.",
      "조직적이고 디테일에 중점을 둔 업무."
    ],
    "weakness": [
      "완벽에 미치지 못할 때 스트레스를 받을 수 있습니다.",
      "자기 의심과 과잉 생각의 불완전성으로 어려움을 겪을 수 있습니다.",
      "내부적으로 복잡하기 때문에 완전히 이해하기 어렵습니다."
    ],
    "behavior": [
      "조용하지만 사랑하는 사람들에게 헌신적입니다.",
      "다른 사람의 감정에 민감하지만 자신의 감정을 표현하는 데 어려움을 겪습니다.",
      "전통과 변화에 대한 개방성의 균형을 맞춥니다.",
      "다른 사람이 성장하고 성공할 수 있도록 돕는 것에서 기쁨을 찾으세요."
    ]
  },
"ISFP": {
    "nickname": [
      "궁금한 아티스트",
      "비르투오소"
    ],
    "traits": [
      "조용히 친절하고 따뜻한 마음씨.",
      "조화와 정서적 역학에 민감합니다.",
      "예술적, 미적 재능을 보유하고 있습니다.",
      "피상적인 관계보다 깊고 의미 있는 관계를 선호합니다."
    ],
    "strengths": [
      "매우 창의적이고 직관적으로 감정을 표현합니다.",
      "사랑하는 사람에게 공감하고 충성합니다.",
      "사소한 세부 사항만 관찰하면 다른 사람들이 간과할 수 있습니다.",
      "진정성과 개인적 표현을 소중히 여깁니다."
    ],
    "weakness": [
      "불결정과 장기 계획에 어려움을 겪고 있습니다.",
      "비평을 개인적으로 받아들이는 경향이 있습니다.",
      "감정을 억제하고 대립을 피할 수 있습니다."
    ],
    "behavior": [
      "음악, 미술, 글쓰기와 같은 창의적인 취미에 빠져 있는 경우가 많습니다.",
      "자연스럽고 자유롭게 흐르는 라이프스타일을 선호합니다.",
      "작고 감각적인 즐거움과 그 순간의 삶을 즐기세요.",
      "규칙이 엄격하거나 경쟁이 치열한 환경에서는 어려움을 겪습니다."
    ]
  },




"INTJ": {
    "nickname": [
      "마스터마인드",
      "스트레티지스트"
    ],
    "traits": [
      "매우 독립적이고 자립적입니다.",
      "논리적이고 전략적인 사고방식을 가진 선구적인 사고방식.",
      "창의성과 실행에 대한 결단력을 결합합니다.",
      "단기적인 만족보다는 장기적인 목표에 초점을 맞추고 있습니다."
    ],
    "strengths": [
      "미래의 결과를 계획하고 조직하는 데 탁월합니다.",
      "그들의 아이디어와 결정에 자신감을 갖고 있습니다.",
      "추상적으로 생각하고 관련 없어 보이는 개념을 연결할 수 있습니다.",
      "혁신과 문제 해결 환경이 번성합니다."
    ],
    "weakness": [
      "정서적 뉘앙스를 이해하는 데 어려움을 겪고 있습니다.",
      "다른 사람들에게 냉담하게 보이거나 지나치게 비판적으로 보일 수 있습니다.",
      "비효율성이나 무능함을 견디기 어렵습니다."
    ],
    "behavior": [
      "항상 여러 단계 앞서 생각하며 체스 게임처럼 삶에 다가갑니다.",
      "소소한 대화보다는 깊고 지적인 대화를 선호합니다.",
      "비효율적이라고 판단되면 권위와 전통에 저항합니다.",
      "사회적 승인보다 개인의 성장과 자기계발을 우선시합니다."
    ]
  },

"INTP": {
    "nickname": [
      "객관적 분석가",
      "로직리안"
    ],
    "traits": [
      "매우 논리적이고 분석적인 문제 해결사", ",
      "궁금하고 추상적인 개념과 이론에 끌립니다.",
      "실제 적용보다 이론적 탐구를 선호합니다.",
      "의사 결정의 자율성을 누리는 독립적인 사상가들."
    ],
    "strengths": [
      "패턴 인식에 타고난 적성을 가진 고도로 지능적입니다.",
      "복잡한 아이디어를 분석하고 해체하는 강력한 능력.",
      "대체 관점에 유연하고 개방적입니다.",
      "지적 또는 창의적인 추구가 넘쳐납니다."
    ],
    "weakness": [
      "추상적인 이론을 위해 실용적인 세부 사항을 소홀히 할 수 있습니다.",
      "정서적 표현이나 대인 관계의 따뜻함에 어려움을 겪습니다.",
      "관심이 없을 때 우유부단하거나 초연해 보일 수 있습니다."
    ],
    "behavior": [
      "책, 연구 또는 문제 해결에 몰두하는 모습을 자주 볼 수 있습니다.",
      "리더 역할을 피하고 독립적인 업무를 선호하는 경향이 있습니다.",
      "정해진 규범이나 시스템에 자주 질문합니다.",
      "철학적 또는 과학적 주제에 대한 토론이나 토론을 즐깁니다."
    ]
  },



"INFJ": {
    "nickname": [
      " 인사이트 비저너리",
      "찬성"
    ],
    "traits": [
      "타인의 감정에 대해 공감하고 깊이 직관적입니다.",
      "강력한 이상과 미래에 대한 명확한 비전을 가지고 있습니다.",
      "표면 수준 상호 작용보다 의미 있는 연결을 선호합니다.",
      "상상력과 실용성을 결합하여 변화를 유도합니다."
    ],
    "strengths": [
      "창의성과 비전이 뛰어나고 더 큰 그림을 볼 수 있습니다.",
      "다른 사람과 공감하고 지원을 제공하는 강력한 능력.",
      "깊은 목적의식과 도덕성에 영감을 받았습니다.",
      "장기적인 목표를 위한 계획과 조직에 탁월합니다."
    ],
    "weakness": [
      "타인의 감정을 흡수하여 정서적 소진에 취약합니다.",
      "지나치게 완벽주의적이거나 이상주의적일 수 있습니다.",
      "그들의 생각이나 필요를 명확하게 표현하는 데 어려움을 겪을 수 있습니다."
    ],
    "behavior": [
      "다른 사람을 멘토링하거나 지원하는 경우가 많습니다.",
      "깊고 철학적인 대화와 성찰을 즐기세요.",
      "긍정적인 영향력을 발휘하기 위해 막후에서 일하는 것을 선호합니다.",
      "갈등을 피하되 도덕적 원칙을 고수합니다."
    ]
  },




"INFP": {
    "nickname": [
      "중재자",
      "이상주의자"
    ],
    "traits": [
      "깊은 공감과 가치 지향적인 사람들.",
      "예술, 문학, 철학에 대한 사랑을 가진 창의적인 사상가들", ",
      "조화를 우선시하고 불필요한 충돌을 피하세요.",
      "개인의 성장과 의미 있는 추구에 집중하는 경우가 많습니다."
    ],
    "strengths": [
      "믿을 수 없을 정도로 공감력이 뛰어나고 타인의 감정을 쉽게 이해합니다.",
      "창의적이고 상상력이 풍부하며 예술적 노력이 뛰어납니다.",
      "그들이 아끼는 사람들에게 충성스럽고 지지합니다.",
      "작은 친절을 통해 세상을 더 나은 곳으로 만들기 위해 노력하세요."
    ],
    "weakness": [
      "비판과 부정에 매우 민감합니다.",
      "지나친 생각과 자기 의심에 빠지기 쉽습니다.",
      "실질적이거나 일상적인 책임감으로 어려움을 겪을 수 있습니다."
    ],
    "behavior": [
      "고독한 성찰과 창의적 표현을 즐기세요.",
      "꿈에 그리거나 생각에 잠긴 것처럼 보일 수 있습니다.",
      "개인의 가치와 신념을 이해하는 데 에너지를 쏟습니다.",
      "사랑하는 사람을 지원하기 위해 무대 뒤에서 일하는 경우가 많습니다."
    ]
  },



"ESTJ": {
    "nickname": [
      "효율적인 정리 도구",
      "관리자"
    ],
    "traits": [
      "강력한 리더십과 조직 기술.",
      "실용적이고 목표 지향적입니다.",
      "전통, 구조, 효율성을 중시합니다.",
      "의사 결정에 있어 직접적이고 결정적입니다."
    ],
    "strengths": [
      "팀과 프로젝트를 조직하는 데 탁월합니다.",
      "기한을 준수하는 데 있어 신뢰할 수 있고 책임감이 있습니다.",
      "비효율성을 신속하게 파악하고 해결책을 제안할 수 있습니다.",
      "고도로 훈련하고 목표 달성에 집중합니다."
    ],
    "weakness": [
      "다른 사람의 정서적 요구를 간과할 수 있습니다.",
      "지나치게 엄격하거나 경직된 것으로 볼 수 있습니다.",
      "모호함을 싫어하고 명확한 규칙을 선호합니다."
    ],
    "behavior": [
      "그룹 설정을 담당하는 것을 즐깁니다.",
      "명확한 기대치를 가진 구조화된 환경에서 번창합니다.",
      "질서와 안정성을 유지하기 위해 노력하는 경우가 많습니다.",
      "시간 엄수와 신뢰성을 강력하게 중시합니다."
    ]
  },





"ESTP": {
    "nickname": [
      "에너지 문제 해결사",
      "기업가"
    ],
    "traits": [
      "모험적이고 외향적입니다.",
      "행동에 대한 사랑을 가진 빠른 사고방식", ",
      "변화하는 상황에 잘 적응하고 관찰력이 뛰어납니다.",
      "이론적 학습보다 실습 경험을 선호합니다."
    ],
    "strengths": [
      "동적이고 빠르게 변화하는 환경에서 번창합니다.",
      "자원이 풍부하고 실용적인 솔루션을 신속하게 찾을 수 있습니다.",
      "강력한 대인관계 기술과 카리스마.",
      "압박감 속에서도 침착함을 유지할 수 있습니다."
    ],
    "weakness": [
      "장기 계획에 어려움을 겪을 수 있습니다.",
      "충동적이거나 지나치게 위험을 감수할 수 있습니다.",
      "사회적 상호작용에서 정서적 뉘앙스를 소홀히 할 수 있습니다."
    ],
    "behavior": [
      "신체 활동과 도전을 즐깁니다.",
      "목표를 달성하기 위해 위험을 감수하는 경우가 많습니다.",
      "미래 계획보다는 현재에 집중하세요.",
      "사회 환경에서 활기차고 번창합니다."
    ]
  },


"ESFJ": {
    "nickname": [
      "돌봄 서포터",
      "합의"
    ],
    "traits": [
      "따뜻하고 양육적입니다.",
      "다른 사람의 필요와 감정에 잘 적응합니다.",
      "화합과 협력을 중시합니다.",
      "강력한 사명감과 책임감."
    ],
    "strengths": [
      "관계를 만들고 유지하는 데 탁월합니다.",
      "다른 사람을 지지하고 공감합니다.",
      "일상 업무에서 체계적이고 디테일에 중점을 둡니다.",
      "매우 신뢰할 수 있고 충성도가 높습니다."
    ],
    "weakness": [
      "다른 사람을 돕는 데 지나치게 많은 노력을 기울일 수 있습니다.",
      "갈등이나 비판을 처리하는 데 어려움을 겪고 있습니다.",
      "외모 유지에 지나치게 집중할 수 있습니다."
    ],
    "behavior": [
      "이벤트를 조직하고 사람들을 하나로 모으는 것을 즐깁니다.",
      "사회성이 높고 그룹 환경에서 번창합니다.",
      "커뮤니티 내에서 돌봄 역할을 맡는 경우가 많습니다.",
      "구조화되고 조화로운 환경을 선호합니다."
    ]
  },



"ESFP": {
    "nickname": [
      "라이브 엔터테이너",
      "퍼포머"
    ],
    "traits": [
      "자발적이고 재미있는.",
      "사회성이 높고 다른 사람들과 소통하는 것을 즐깁니다.",
      "흥분과 즐거움을 추구하며 그 순간을 살아갑니다.",
      "감각적 경험과 미학에 충실합니다."
    ],
    "strengths": [
      "에너지 넘치고 기분이 좋아져 긍정적인 분위기를 조성합니다.",
      "새로운 상황에 적응할 수 있고 자원이 풍부합니다.",
      "매우 관찰력이 뛰어나고 주변 환경과 조화를 이룹니다.",
      "강력한 대인관계 기술과 카리스마."
    ],
    "weakness": [
      "장기적인 약속이나 계획에 어려움을 겪을 수 있습니다.",
      "지나치게 충동적이거나 스릴을 추구할 수 있습니다.",
      "갈등을 해결하기보다는 회피하기 쉽습니다."
    ],
    "behavior": [
      "사회적 이벤트와 모임이 활발합니다.",
      "자연스러운 매력으로 인해 관심의 중심이 되는 경우가 많습니다.",
      "음악, 춤, 연기와 같은 창의적인 취미를 즐기세요.",
      "유연성을 선호하고 경직된 스케줄을 싫어합니다."
    ]
  },





"ENTJ": {
    "nickname": [
      "대담한 리더",
      "커맨더"
    ],
    "traits": [
      "강력한 리더십 기술을 갖춘 전략적 사고방식자", ",
      "고도로 추진력이 뛰어나고 목표 지향적입니다.",
      "의사 결정에 자신감 있고 적극적입니다.",
      "대규모 프로젝트를 조직하고 관리하는 데 큰 힘을 발휘합니다."
    ],
    "strengths": [
      "전략을 만들고 실행하는 데 매우 능숙합니다.",
      "결정적이고 효율적으로 목표를 달성합니다.",
      "다른 사람에게 영감을 주고 이끄는 강력한 능력.",
      "문제 해결과 비판적 사고에 탁월합니다."
    ],
    "weakness": [
      "지나치게 지배적이거나 통제적으로 보일 수 있습니다.",
      "다른 사람의 정서적 요구를 수용하기 위해 고군분투합니다.",
      "비효율성이나 지연으로 조급해할 수 있습니다."
    ],
    "behavior": [
      "리더 역할을 맡는 경우가 많습니다.",
      "장기적인 성공과 계획에 초점을 맞추고 있습니다.",
      "경쟁 환경에서 번창합니다.",
      "명확한 구조와 높은 기준을 선호합니다."
    ]
  },






"ENTP": {
    "nickname": [
      "혁신적 토론자",
      "비전"
    ],
    "traits": [
      "에너지 넘치고 호기심이 많습니다.",
      "지적 도전과 논쟁이 활발합니다.",
      "매우 혁신적이고 아이디어로 가득 찬 제품입니다.",
      "일상을 따르는 것보다 가능성을 탐구하는 것을 선호합니다."
    ],
    "strengths": [
      "예외적인 문제 해결 및 창의적 사고.",
      "새로운 개념을 빠르게 적응하고 학습하세요.",
      "카리스마 있고 설득력 있는 커뮤니케이션.",
      "다른 사람들이 놓칠 수 있는 연결을 확인할 수 있습니다."
    ],
    "weakness": [
      "업무 후속 처리에 어려움을 겪을 수 있습니다.",
      "지나치게 논쟁적일 수도 있고 반대일 수도 있습니다.",
      "실용성보다 참신함을 우선시할 수 있습니다."
    ],
    "behavior": [
      "새로운 아이디어와 프로젝트를 브레인스토밍하는 경우가 많습니다.",
      "활발한 토론이나 토론에 참여하는 것을 즐깁니다.",
      "동적이고 빠르게 변화하는 환경에서 번창합니다.",
      "강박한 규칙이나 구조를 좋아하지 않습니다."
    ]
  },





"ENFJ": {
    "nickname": [
      "카리스마 멘토",
      "주인공"
    ],
    "traits": [
      "따뜻하고 공감하며 다른 사람의 감정에 매우 잘 적응합니다.",
      "다른 사람에게 영감을 주고 동기를 부여하는 자연스러운 리더", ",
      "조화와 협업을 중시합니다.",
      "매우 이상주의적이고 긍정적인 영향을 미치는 데 집중합니다."
    ],
    "strengths": [
      "강력한 관계를 구축하고 유지하는 데 능숙합니다.",
      "다른 사람의 성장을 돕는 데 공감하고 지원합니다.",
      "고도로 조직적이고 효율적으로 계획을 수립합니다.",
      "사람들에게 공통의 목표를 향해 영감을 주고 결집할 수 있습니다."
    ],
    "weakness": [
      "다른 사람을 돕는 데 지나치게 많은 노력을 기울일 수 있습니다.",
      "다른 사람의 필요를 우선시하기 때문에 자기 관리에 어려움을 겪을 수 있습니다.",
      "비판이나 갈등에 매우 민감합니다."
    ],
    "behavior": [
      "다른 사람을 이끌거나 멘토링하는 모습을 자주 볼 수 있습니다.",
      "깊고 의미 있는 대화를 즐기세요.",
      "조화와 협업을 촉진하는 데 중점을 둡니다.",
      "구조화되어 있지만 사람 중심적인 환경에서 번창합니다."
    ]
  },



"ENFP": {
    "nickname": [
      "에너지 비전가",
      "캠페인"
    ],
    "traits": [
      "열정적이고 상상력이 풍부합니다.",
      "매우 사교적이고 의미 있는 관계를 바탕으로 번창합니다.",
      "호기심과 모험심에 이끌립니다.",
      "일상보다 유연성과 창의성을 선호합니다."
    ],
    "strengths": [
      "창의성이 뛰어나고 아이디어를 생성하는 데 능숙합니다.",
      "개인적인 관계에서 공감하고 지지합니다.",
      "새로운 환경이나 과제에 빠르게 적응할 수 있습니다.",
      "다른 사람들에게 열정을 갖고 영감을 줍니다."
    ],
    "weakness": [
      "집중력을 유지하거나 끝까지 따라가는 데 어려움을 겪을 수 있습니다.",
      "지나치게 이상주의적이거나 비실용적일 수 있습니다.",
      "과잉 사고와 감정의 기복이 심하기 쉽습니다."
    ],
    "behavior": [
      "새로운 취미나 관심사를 탐색하는 것을 즐깁니다.",
      "자주 깊고 의미 있는 대화를 찾습니다.",
      "동적이고 끊임없이 변화하는 환경에서 번창합니다.",
      "협력적이고 개방적인 커뮤니티를 선호합니다."
    ]
  }
}


당신은 mbti유형을 바탕으로 관광지를 추천해주는 전문가 입니다. 답변은 json 형태로만 가능합니다.()사용 금지입니다.추천 관광지,음식/카페,숙박시설,축제 이렇게 4개의 카테고리 모두 찾아줘야합니다.추천관광지 8개 숙박시설은 5개,음식/카페는 4개,축제는 2개 찾아줘야합니다.음식/카페와 숙박시설의 주소는 정확하게 입력되어야 합니다. 숙박시설은 호텔이나 게스트하우스처럼 이름이 정확한 숙박시설로 찾아줘야합니다. "address": "(실제 주소로 대체 필요)" 이런식으로 ()가 포함되어 있으면 안돼고 검색이 필요한 주소나 장소는 절대 들어가면 안됩니다. '대체 필요'한 정보는 찾아주지 말고 확실한 주소와 위도 경도 장소가 필요합니다.밑에 예시처럼. 그리고 추천관광지,음식/카페,숙박시설의 주소에 따른 위도와 경도도 필요합니다.반드시 사용자가 선택한 지역으로 검색해야 합니다. 축제 날짜는 null로 대체해줘.**주의 는 빼줘

답변 예시:
{
  "mbti": "istj",
  "region": "전라북도 전주시",
"recommendations":{
    "tourist_attraction":[
    {
      "place": "경기전",
      "description": "조선 태조 이성계의 어진을 모신 전통 건축물",
      "address": "전라북도 전주시 완산구 태조로 44",
      "activity": "역사 탐방 및 전통 건축물 감상"
    }
    {
      "place": "전주 한옥마을",
      "description": "전통 한옥이 밀집한 문화 관광지",
      "address": "전라북도 전주시 완산구 기린대로 99",
    "latitude":
    "longitude":
      "activity": "한옥 건축물 관람 및 전통 문화 체험"
    }
  ]
}
"restaurant_cafe":[
    {
      "place": "백년옥",
      "reason": "백년옥은 전통적인 맛을 현대적으로 재해석한 음식을 제공합니다. 이곳은 전통 한옥 건물에서 식사를 즐길 수 있어, 분위기 또한 매우 좋습니다.",
      "address": "전북 전주시 완산구 팔달로 157-5 (경원동1가)",
    "latitude":
    "longitude":
      
    }
  ]

"accommodation": [
    {
      "place": "라한호텔 전주",
    "desciption":"전주에 자리한 라한호텔 전주에서는 컨시어지 서비스, 금연실 객실, 피트니스 센터, 무료 Wi-Fi, 레스토랑 등을 제공합니다. 숙소는 전주 한옥마을에서 3분 거리에 있습니다. 해당 4성급 호텔에는 24시간 프런트 데스크, 비즈니스 센터 등이 완비되어 있습니다. 구내에는 전용 주차장이 마련되어 있습니다."

      "address": "전주,완산구 기린대로 85",
    "latitude":
    "longitude":
      
    }
  ]



}

-----
mbti: "${mbti}"
region:" ${region}"

"mbti": "${mbti}",
  "region": "${region}",
  "recommendations": [
    {
      "place": 
      "description": 
      "address": 
  
`;

    try {
        console.log('Sending prompt to AI:', prompt);        // 모델을 사용하여 콘텐츠 생성
        const result = await model.generateContent(prompt);

        console.log('AI Response:', result.response.text()); 

        return result.response.text();
    } catch (error) {
        console.error('Error generating recommendation:', error);
        throw new Error('Failed to generate tourist recommendation.');
    }
};




